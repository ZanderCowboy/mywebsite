# Firebase Analytics Setup Guide for Flutter Web

This guide will walk you through setting up Firebase Analytics for your Flutter web portfolio project.

## Prerequisites

- Flutter SDK installed
- A Google account
- Your Flutter web project (which you already have)

## Step 1: Create a Firebase Project

1. Go to the [Firebase Console](https://console.firebase.google.com/)
2. Click "Add project" or "Create a project"
3. Enter a project name (e.g., "my-portfolio-website")
4. Choose whether to enable Google Analytics (recommended: **Yes**)
5. If you enabled Analytics, select or create a Google Analytics account
6. Click "Create project"
7. Wait for the project to be created, then click "Continue"

## Step 2: Add Your Web App to Firebase

1. In your Firebase project dashboard, click the web icon `</>` to add a web app
2. Register your app:
   - App nickname: "My Portfolio Website" (or any name you prefer)
   - Check "Also set up Firebase Hosting for this app" if you plan to use Firebase Hosting
   - Click "Register app"

3. **Important**: Copy the Firebase configuration object that appears. It looks like this:

   ```javascript
   const firebaseConfig = {
     apiKey: "your-api-key",
     authDomain: "your-project.firebaseapp.com",
     projectId: "your-project-id",
     storageBucket: "your-project.appspot.com",
     messagingSenderId: "123456789",
     appId: "your-app-id",
     measurementId: "G-XXXXXXXXXX"
   };
   ```

4. Click "Continue to console"

## Step 3: Install Required Flutter Packages

Add these dependencies to your `pubspec.yaml`:

```yaml
dependencies:
  firebase_core: ^2.24.2
  firebase_analytics: ^10.7.4
  firebase_core_web: ^2.8.1
```

Run: `flutter pub get`

## Step 4: Configure Firebase for Web

### 4.1 Update web/index.html

Open `web/index.html` and add the Firebase SDK scripts before the closing `</body>` tag:

```html
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-analytics-compat.js"></script>

<!-- Initialize Firebase -->
<script>
  const firebaseConfig = {
    apiKey: "your-api-key",
    authDomain: "your-project.firebaseapp.com",
    projectId: "your-project-id",
    storageBucket: "your-project.appspot.com",
    messagingSenderId: "123456789",
    appId: "your-app-id",
    measurementId: "G-XXXXXXXXXX"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>
```

**Replace the `firebaseConfig` object with your actual configuration from Step 2.**

## Step 5: Create Firebase Configuration File

Create a new file `lib/firebase_options.dart`:

```dart
// File generated by FlutterFire CLI.
// ignore_for_file: lines_longer_than_80_chars, avoid_classes_with_only_static_members
import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;
import 'package:flutter/foundation.dart'
    show defaultTargetPlatform, kIsWeb, TargetPlatform;

/// Default [FirebaseOptions] for use with your Firebase apps.
class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      return web;
    }
    switch (defaultTargetPlatform) {
      case TargetPlatform.android:
        return android;
      case TargetPlatform.iOS:
        return ios;
      case TargetPlatform.macOS:
        return macos;
      case TargetPlatform.windows:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for windows - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      case TargetPlatform.linux:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for linux - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      default:
        throw UnsupportedError(
          'DefaultFirebaseOptions are not supported for this platform.',
        );
    }
  }

  static const FirebaseOptions web = FirebaseOptions(
    apiKey: 'your-api-key',
    appId: 'your-app-id',
    messagingSenderId: 'your-sender-id',
    projectId: 'your-project-id',
    authDomain: 'your-project.firebaseapp.com',
    storageBucket: 'your-project.appspot.com',
    measurementId: 'G-XXXXXXXXXX',
  );

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'your-android-api-key',
    appId: 'your-android-app-id',
    messagingSenderId: 'your-sender-id',
    projectId: 'your-project-id',
    storageBucket: 'your-project.appspot.com',
  );

  static const FirebaseOptions ios = FirebaseOptions(
    apiKey: 'your-ios-api-key',
    appId: 'your-ios-app-id',
    messagingSenderId: 'your-sender-id',
    projectId: 'your-project-id',
    storageBucket: 'your-project.appspot.com',
    iosBundleId: 'com.example.mywebsite',
  );

  static const FirebaseOptions macos = FirebaseOptions(
    apiKey: 'your-ios-api-key',
    appId: 'your-ios-app-id',
    messagingSenderId: 'your-sender-id',
    projectId: 'your-project-id',
    storageBucket: 'your-project.appspot.com',
    iosBundleId: 'com.example.mywebsite',
  );
}
```

**Replace all the placeholder values with your actual Firebase configuration values.**

## Step 6: Initialize Firebase in main.dart

Update your `lib/main.dart` file:

```dart
import 'package:flutter/material.dart';
import 'package:firebase_core/firebase_core.dart';
import 'package:firebase_analytics/firebase_analytics.dart';
import 'firebase_options.dart';

// Your existing imports...

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
  
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  // Create a FirebaseAnalytics instance
  static FirebaseAnalytics analytics = FirebaseAnalytics.instance;
  static FirebaseAnalyticsObserver observer = 
      FirebaseAnalyticsObserver(analytics: analytics);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Your Portfolio',
      // Add the analytics observer to track page views
      navigatorObservers: <NavigatorObserver>[observer],
      // Your existing MaterialApp configuration...
      home: YourHomePage(),
    );
  }
}
```

## Step 7: Create Analytics Service

Create a new file `lib/services/analytics_service.dart`:

```dart
import 'package:firebase_analytics/firebase_analytics.dart';

class AnalyticsService {
  static final FirebaseAnalytics _analytics = FirebaseAnalytics.instance;

  // Track page views
  static Future<void> logPageView(String pageName) async {
    await _analytics.logScreenView(screenName: pageName);
  }

  // Track button clicks
  static Future<void> logButtonClick(String buttonName) async {
    await _analytics.logEvent(
      name: 'button_click',
      parameters: {'button_name': buttonName},
    );
  }

  // Track when someone views a project
  static Future<void> logProjectView(String projectName) async {
    await _analytics.logEvent(
      name: 'project_view',
      parameters: {'project_name': projectName},
    );
  }

  // Track when someone clicks on social links
  static Future<void> logSocialLinkClick(String platform) async {
    await _analytics.logEvent(
      name: 'social_link_click',
      parameters: {'platform': platform},
    );
  }

  // Track when someone downloads resume/CV
  static Future<void> logResumeDownload() async {
    await _analytics.logEvent(name: 'resume_download');
  }

  // Track contact form submissions
  static Future<void> logContactSubmission() async {
    await _analytics.logEvent(name: 'contact_form_submit');
  }

  // Set user properties
  static Future<void> setUserProperty(String name, String value) async {
    await _analytics.setUserProperty(name: name, value: value);
  }
}
```

## Step 8: Add Tracking to Your Pages

### 8.1 Track Page Views

In your page widgets, add analytics tracking:

```dart
import 'package:your_app/services/analytics_service.dart';

class HomePage extends StatefulWidget {
  @override
  _HomePageState createState() => _HomePageState();
}

class _HomePageState extends State<HomePage> {
  @override
  void initState() {
    super.initState();
    // Track page view
    AnalyticsService.logPageView('home_page');
  }

  @override
  Widget build(BuildContext context) {
    // Your existing build method
  }
}
```

### 8.2 Track Button Interactions

```dart
ElevatedButton(
  onPressed: () {
    // Track the button click
    AnalyticsService.logButtonClick('view_projects');
    // Your existing onPressed logic
  },
  child: Text('View Projects'),
)
```

### 8.3 Track Social Link Clicks

```dart
InkWell(
  onTap: () {
    AnalyticsService.logSocialLinkClick('github');
    // Launch URL logic
  },
  child: // Your social icon
)
```

## Step 9: Build and Test

1. Build your project for web:

   ```bash
   flutter build web
   ```

2. Run your project locally:

   ```bash
   flutter run -d chrome
   ```

3. Navigate through your website to generate some analytics events

## Step 10: Verify in Firebase Console

1. Go to your Firebase Console
2. Navigate to Analytics > Events
3. You should see events appearing (it may take a few minutes to show up)
4. Check Analytics > Realtime to see current active users

## Step 11: Set Up Enhanced Ecommerce (Optional)

If you want to track specific goals like "contact form submissions" or "resume downloads":

```dart
// Track a conversion event
static Future<void> logConversion(String eventName, {double? value}) async {
  await _analytics.logEvent(
    name: eventName,
    parameters: {
      'currency': 'USD',
      'value': value ?? 1.0,
    },
  );
}
```

## Troubleshooting

### Common Issues

1. **Events not showing up**: Wait 24-48 hours for events to appear in reports (Realtime should show immediately)

2. **Build errors**: Make sure all dependencies are properly installed with `flutter pub get`

3. **Web-specific issues**: Ensure the Firebase SDK scripts are correctly added to `web/index.html`

4. **Configuration errors**: Double-check that your Firebase config values match exactly

### Debug Analytics

Enable debug mode by adding this to your web app URL:

```
?debug_mode=1
```

Example: `http://localhost:8080/?debug_mode=1`

## Best Practices

1. **Don't track sensitive information** - Never send personal data to Analytics
2. **Use meaningful event names** - Make them descriptive and consistent
3. **Set up conversion tracking** - Track meaningful actions like contact form submissions
4. **Monitor regularly** - Check your Analytics dashboard weekly
5. **Respect privacy** - Consider adding analytics opt-out options for users

## Next Steps

After setup:

1. Set up Goals in Google Analytics for important actions
2. Create custom dashboards for your portfolio metrics
3. Set up alerts for traffic spikes
4. Consider adding Google Tag Manager for more advanced tracking

---

**Note**: Replace all placeholder values (like `your-api-key`, `your-project-id`, etc.) with your actual Firebase configuration values from Step 2.

This setup will give you comprehensive analytics for your portfolio website, tracking page views, user interactions, and custom events that matter to your business goals.
